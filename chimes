// --- TIMER SETTINGS ---
const START_TIME_SECONDS = 12 * 60; // 12 minutes
let timeLeft = START_TIME_SECONDS;
let timerInterval;
let timerRunning = false;

// Define the alert points in SECONDS REMAINING (7, 6, 0 minutes left)
const CHIME_POINTS = [420, 360, 0]; 

// --- HTML ELEMENTS ---
const display = document.getElementById('timer-display');
const startButton = document.getElementById('start-button'); // Get the new button

// --- AUDIO SETUP ---
function playChime() {
    // NOTE: If you do not have an actual 'bell.mp3' file in your repository, 
    // this will just print to the console. 
    // If you add a simple sound file, uncomment the lines below.
    console.log("CHIME! Sound Played!");
    // const audio = new Audio('bell.mp3'); 
    // audio.play(); 
}

// --- MAIN TIMER FUNCTION ---
function updateTimer() {
    let minutes = Math.floor(timeLeft / 60);
    let seconds = timeLeft % 60;

    // Format the time display (e.g., 5:05 instead of 5:5)
    seconds = seconds < 10 ? '0' + seconds : seconds;
    display.textContent = minutes + ':' + seconds;

    // 1. CHIME CHECK 
    if (CHIME_POINTS.includes(timeLeft)) {
        playChime();
    }
    
    // 2. VISUAL ALERT (Changes the color for the last 60 seconds)
    if (timeLeft <= 60) { 
        display.classList.add('alert-red');
    } else {
        display.classList.remove('alert-red');
    }

    // 3. STOP CONDITION
    if (timeLeft <= 0) {
        clearInterval(timerInterval);
        display.textContent = "TIME UP!";
        startButton.textContent = "RESET";
        startButton.style.display = 'block';
        return; 
    }

    // 4. DECREMENT
    timeLeft--;
}

// --- START BUTTON LOGIC ---
startButton.addEventListener('click', function() {
    if (!timerRunning) {
        // Start the timer
        timerInterval = setInterval(updateTimer, 1000);
        timerRunning = true;
        startButton.style.display = 'none'; // Hide button once started
    } 
    // Note: If you implement a 'RESET' state in the future, you'd handle it here.
});
